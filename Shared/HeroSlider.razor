@inject IJSRuntime JSRuntime
@implements IAsyncDisposable

@* Cấu trúc Slider sử dụng Bootstrap Carousel với hiệu ứng Fade tinh tế hơn *@
<div id="heroCarousel" class="carousel slide carousel-fade" data-bs-ride="carousel">
    <div class="carousel-indicators">
        <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
        <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="1" aria-label="Slide 2"></button>
        <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="2" aria-label="Slide 3"></button>
        <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="3" aria-label="Slide 4"></button>
        <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="4" aria-label="Slide 5"></button>
    </div>
    <div class="carousel-inner">
        <div class="carousel-item active">
            <img src="/images/slide-1.jpg" class="d-block w-100" alt="Slide 1">
            <div class="carousel-caption d-none d-md-block">
                <h1>Kiến tạo không gian, nâng tầm đẳng cấp</h1>
                <p>Khám phá các giải pháp phòng tắm và thiết bị vệ sinh cao cấp hàng đầu.</p>
                <a href="/san-pham" class="btn btn-light btn-lg mt-3">Xem tất cả sản phẩm</a>
            </div>
        </div>
        <div class="carousel-item">
            <img src="/images/slide-2.jpg" class="d-block w-100" alt="Slide 2">
            <div class="carousel-caption d-none d-md-block">
                <h1>Thiết kế Vượt thời gian</h1>
                <p>Sự kết hợp hoàn hảo giữa thẩm mỹ và công năng.</p>
                <a href="/san-pham" class="btn btn-light btn-lg mt-3">Xem tất cả sản phẩm</a>
            </div>
        </div>
        <div class="carousel-item">
            <img src="/images/slide-3.jpg" class="d-block w-100" alt="Slide 3">
            <div class="carousel-caption d-none d-md-block">
                <h1>Vật liệu Cao cấp</h1>
                <p>Chất lượng bền bỉ, khẳng định vị thế của bạn.</p>
                <a href="/san-pham" class="btn btn-light btn-lg mt-3">Xem tất cả sản phẩm</a>
            </div>
        </div>
        <div class="carousel-item">
            <img src="/images/slide-4.jpg" class="d-block w-100" alt="Slide 4">
             <div class="carousel-caption d-none d-md-block">
                <h1>Công nghệ Thông minh</h1>
                <p>Trải nghiệm sự tiện nghi và thư giãn tuyệt đối.</p>
                <a href="/san-pham" class="btn btn-light btn-lg mt-3">Xem tất cả sản phẩm</a>
            </div>
        </div>
         <div class="carousel-item">
            <img src="/images/slide-5.jpg" class="d-block w-100" alt="Slide 5">
             <div class="carousel-caption d-none d-md-block">
                <h1>Dịch vụ Chuyên nghiệp</h1>
                <p>Tư vấn và lắp đặt bởi đội ngũ chuyên gia hàng đầu.</p>
                <a href="/san-pham" class="btn btn-light btn-lg mt-3">Xem tất cả sản phẩm</a>
            </div>
        </div>
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#heroCarousel" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#heroCarousel" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
    </button>
</div>

@code {
    private IJSObjectReference? _module;

    // Khởi tạo slider bằng JavaScript sau khi component đã được render
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            _module = await JSRuntime.InvokeAsync<IJSObjectReference>("import", "./js/slider-init.js");
            if (_module is not null)
            {
                await _module.InvokeVoidAsync("initCarousel", "#heroCarousel");
            }
        }
    }

    // Dọn dẹp đối tượng JavaScript khi component bị hủy
    async ValueTask IAsyncDisposable.DisposeAsync()
    {
        if (_module is not null)
        {
            await _module.DisposeAsync();
        }
    }
}

